{% extends "main/base.html" %}
{% block title %}{{ profile }}{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-md-5">
            <h4>{{ profile }}</h4>
            <table class="table table-bordered table-condensed">
                {% if profile.group %}<tr><td>Группа</td><td>{{ profile.group }}</td></tr>{% endif %}
                <tr><td>Баланс</td><td>{% coins profile.balance %}</td></tr>
                <tr><td>Оборот</td><td>{% coins profile.spend %}</td></tr>
                <tr><td>Был в системе</td><td>{{ profile.user.last_login }}</td></tr>
                <tr><td>Дата регистрации</td><td>{{ profile.user.date_joined }}</td></tr>
            </table>
            <div class="panel panel-default">
                <div class="panel-heading">О себе{% if user == profile.user %}
                        <a title="Изменить" href="{% url 'settings' %}" class="btn btn-warning btn-xs pull-right">
                            <span class="glyphicon glyphicon-edit"></span>
                        </a>
                {% endif %}</div>
                <div class="panel-body">
                    <div style="white-space: pre;">{{ profile.about }}</div>
                </div>
            </div>
        </div>
        <div class="col-md-7">
            {% if transactions %}
                <h4>Последние операции</h4>
                <table class="table table-hover table-condensed">
                    <thead>
                        <tr><td></td><td>Участник</td><td>Стоимость</td><td>Когда</td><td></td></tr>
                    </thead>
                    <tbody>
                    {% for transaction in transactions %}
                        <tr>
                            <td>
                            {% if transaction.user_from == profile %}
                                <span title="Перевёл" class="glyphicon glyphicon-chevron-right"></span>
                            {% else %}
                                <span title="Получил" class="glyphicon glyphicon-chevron-left"></span>
                            {% endif %}</td>
                            <td>{% if transaction.user_from != profile %}
                                {% user transaction.user_from %}{% else %}{% user transaction.user_to %}
                            {% endif %}</td>
                            <td><a href="{% url 'transaction' transaction.pk %}">{% coins transaction.amount %}</a></td>
                            <td><a href="{% url 'transaction' transaction.pk %}">{{ transaction.timestamp_create }}</a></td>
                            <td><a href="{% url 'transaction' transaction.pk %}">{% status transaction.status %}</a></td>
                        </tr>
                    {% endfor %}
                    <tbody>
                </table>
                {% include 'main/pager.html' with objects=transactions %}
            {% else %}
                <h4>Операций не произведено</h4>
            {% endif %}
        </div>
    </div>
{% endblock %}
